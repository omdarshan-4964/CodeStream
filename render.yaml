services:
  # Backend - Node.js Socket.IO Server
  - type: web
    name: codestream-socket-server
    runtime: node
    buildCommand: "cd server && npm install && npx tsc"
    startCommand: "cd server && node dist/index.js"
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 5000
      - key: ALLOWED_ORIGINS
        value: https://your-frontend-url.vercel.app,https://www.your-frontend-url.vercel.app

  # Database - PostgreSQL
  # Note: Create this separately in Render Dashboard for better control
  # Then add the DATABASE_URL to your Vercel environment variables
